window.templates = {
    "admin\/courses\/edit.html": "\t<h3 style=\"text-align: left; border-width: 0 0 2px; border-color: lightgray;\">Create Course: \t\t\t\t\r\n\t\t<input \r\n\t\t\tstyle=\"font-size: 20px; outline: 0; border-width: 0 0 0px; border-color: lightgray; width: 60%;\"\r\n\t\t\ttype=\"text\" \r\n\t\t\tid=\"createCourse\" \r\n\t\t\tname=\"createCourse\" \r\n\t\t\tplaceholder=\"(Enter Course Name)\" \r\n\t\t\/>\r\n\t\t<span role=\"button\" onclick=\"create_course()\" style=\"float: right; outline: 0; border-width: 0 0 2px; border-color: lightgray;\" class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"><\/span>\r\n\t<\/h3>\r\n\t\r\n\t<hr \/>\r\n",
    "admin\/courses\/index.html": "\r\n<div class=\"col-md-9\">\r\n\t{{> admin\/courses\/edit.html}}\r\n<\/div>\r\n\r\n<div class=\"col-md-9\" id=\"course-table-target\"><\/div>\r\n\r\n<script>\r\n\r\n\t$(document).ready(function(){\r\n\t\trenderCourseAdminTable();\r\n\t})\r\n\r\n\r\n\r\n\t\/\/\r\n\t\/\/ tsk, tsk, tsk...\r\n\t\/\/\r\n\tfunction renderCourseAdminTable(){\r\n\t\r\n\t\t\/\/\r\n\t\t\/\/ Get a list of courses\r\n\t\t\/\/ and a list of all available roles\r\n\t\t\/\/ then merge the two together so every\r\n\t\t\/\/ course has all possible roles,\r\n\t\t\/\/ and has them checked when they are that role\r\n\t\t\/\/\r\n\t\t$.when(\r\n\t\t\t$.get(\"\/api\/courses\"),\r\n\t\t\t$.get(\"\/api\/roles\")\r\n\t\t).then(function(courses, roles){\r\n\t\t\r\n\t\t\troles = roles[0].results.data;\r\n\t\t\tcourses = courses[0].results.data;\r\n\t\t\t\r\n\t\t\t\/\/\r\n\t\t\t\/\/ Create a hash map so\r\n\t\t\t\/\/ we can more easily work with\r\n\t\t\t\/\/ courses before converting it back\r\n\t\t\t\/\/ to a straight array\r\n\t\t\t\/\/\r\n\t\t\tvar course_map = {};\r\n\t\t\tcourses.forEach(function(course){\r\n\t\t\t\r\n\t\t\t\t\/\/ Load the map\r\n\t\t\t\tcourse_map[course.course_id] = course_map[course.course_id] || course;\r\n\t\t\t\t\r\n\t\t\t\t\/\/ Give everyone a place to keep roles (mmm...roles)\r\n\t\t\t\tcourse_map[course.course_id].roles = course_map[course.course_id].roles || {};\r\n\r\n\t\t\t\t\/\/ Loop through the list of all roles (I'm aware this is duplicative, but it is expedient and works...)\r\n\t\t\t\troles.forEach(function(role){\r\n\t\t\t\t\t\/\/ Give the course that role if it doesn't already exist\r\n\t\t\t\t\tcourse_map[course.course_id].roles[role._id] = course_map[course.course_id].roles[role._id] || JSON.parse(JSON.stringify(role));\r\n\t\t\t\t\t\r\n\t\t\t\t\t\/\/\r\n\t\t\t\t\t\/\/ Set an attribute \"checked\" on the course's role, if the course's role_id = the role's id\r\n\t\t\t\t\t\/\/ N.B. courses are duplicated because they can have more than 1 role...\r\n\t\t\t\t\t\/\/ This process clears that up\r\n\t\t\t\t\t\/\/\r\n\t\t\t\t\tif(role._id == course.role_id){\r\n\t\t\t\t\t\tcourse_map[course.course_id].roles[role._id].checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcourses = Object.values(course_map)\r\n\t\t\t\t\r\n\t\t\tcourses.forEach(function(course){\r\n\t\t\t\t\tcourse.roles = Object.values(course.roles);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t$(\"#course-table-target\").html(templates[\"admin\/courses\/table.html\"].render({data: courses}));\r\n\t\t\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ CREATE COURSE\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction create_course(){\r\n\r\n\t\tvar el = document.querySelector(\"#createCourse\")\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"url\": \"\/api\/courses\",\r\n\t\t\t\"data\": {\r\n\t\t\t\t\"name\": el.value\r\n\t\t\t}\r\n\t\t}).done(function(d){\r\n\t\t\tel.value = \"\";\r\n\t\t\trenderCourseAdminTable();\r\n\t\t})\r\n\t\t\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ UPDATE COURSE NAME\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction update_course_name(_id, event){\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"url\": \"\/api\/courses\/\" + _id + \"\/name\",\r\n\t\t\t\"data\": {\r\n\t\t\t\t\"value\": event.target.value\r\n\t\t\t}\r\n\t\t}).done(function(d){\r\n\t\t\t\/\/ ???\r\n\t\t}).error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ UPDATE COURSE NAME\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction update_course_duedate(_id, event){\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"url\": \"\/api\/courses\/\" + _id + \"\/duedate\",\r\n\t\t\t\"data\": {\r\n\t\t\t\t\"value\": event.target.value\r\n\t\t\t}\r\n\t\t}).done(function(d){\r\n\t\t\t\/\/ ???\r\n\t\t}).error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ DELETE COURSE\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction delete_course(_id){\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"DELETE\",\r\n\t\t\t\"url\": \"\/api\/courses\/\" + _id\r\n\t\t}).done(function(d){\r\n\t\t\trenderCourseAdminTable();\r\n\t\t}).error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ (UN)LINK USER TO ROLE\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction handle_role_course_check(el, ev){\r\n\r\n\t\tif(ev.target.checked === false){\r\n\t\t\tvar method = \"DELETE\"\r\n\t\t} else {\r\n\t\t\tvar method = \"POST\"\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\t\"method\": method,\r\n\t\t\t\"url\": `\/api\/courses\/${ev.target.dataset.course_id}\/roles\/${ev.target.dataset.role}`\r\n\t\t})\r\n\t\t.done(function(d){\r\n\t\t\tconsole.log(d);\r\n\t\t})\r\n\t\t.error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\r\n\t}\r\n\t\r\n\t\r\n\r\n\t\t\r\n\t\t\r\n\r\n\t\r\n\t\r\n<\/script>",
    "admin\/courses\/table.html": "{{#data}}\r\n\t<div class=\"col-md-12 card\">\r\n\t\t<!-- TOGGLER BUTTON -->\r\n\t\t<span style=\"float:right; font-size: 26px; margin-top: -10px; margin-right: 10px;\" onclick=\"window.globals.utilities.toggler(this, event)\"; role=\"button\">+<\/span>\r\n\r\n\r\n\t\t<!-- CARD TITLE -->\r\n\t\t<div class=\"anti-toggler\">\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\t{{course_id}}\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{course_name}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t<\/div>\r\n\t\t\r\n\t\t\r\n\t\t<!-- CARD BODY -->\r\n\t\t<div class=\"toggler\" style=\"display: none;\">\r\n\r\n\t\t\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tCourse Id\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{course_id}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\t\t\t\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tName\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t<textarea onblur=\"update_course_name('{{course_id}}', event)\" data-prior=\"{{course_name}}\" style=\"width: 100%; border: none; outline: none;\">{{course_name}}<\/textarea>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tCreated\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{created}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tDue Date\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t<input value=\"{{duedate}}\" onblur=\"update_course_duedate('{{course_id}}', event)\" type=\"date\" style=\"outline: 0; border-width: 0 0 0px;\" value=\"{{due_date}}\" id=\"course_due_{{course_id}}\"><\/input>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div style=\"vertical-align: middle\" class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tRoles\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{#roles}}\r\n\t\t\t\t\t\t<div style=\"margin-top: 0px;\" class=\"checkbox\">\r\n\t\t\t\t\t\t\t<label for=\"roles-{{course_id}}-{{_id}}\">\r\n\t\t\t\t\t\t\t\t<input data-course_id=\"{{course_id}}\" data-role=\"{{_id}}\" oninput=\"handle_role_course_check(this,event)\" {{#checked}}checked{{\/checked}} type=\"checkbox\" name=\"roles-{{course_id}}-{{_id}}\" id=\"roles-{{course_id}}-{{_id}}\" value=\"{{name}}\">\r\n\t\t\t\t\t\t\t\t{{name}}\r\n\t\t\t\t\t\t\t<\/label>\r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t{{\/roles}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tDelete\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t<span role=\"button\" style=\"color: #337ab7;\" onClick=\"delete_course('{{course_id}}', this)\" href=\"#\" id=\"{{course_id}}\" class=\"delete-me\">CLICK HERE<\/span>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\r\n\t\t<\/div>\r\n\t<\/div>\r\n{{\/data}}",
    "admin\/index.html": "<h1 style=\"margin-top: 100px\">Site Administration<\/h1>\r\n<hr \/>\r\n<div class=\"col-md-12\">\r\n    <!-- CONTAINER FOR INSTRUCTIONS -->\r\n    <div class=\"col-md-2\" role=\"main\">\r\n        <!-- Nav tabs -->\r\n        <ul class=\"nav nav-pills nav-stacked\" role=\"tablist\">\r\n            <li role=\"presentation\" class=\"active\">\r\n                <a href=\"#users\" aria-controls=\"users\" role=\"tab\" data-toggle=\"tab\">Users<\/a>\r\n            <\/li>\r\n            <li role=\"presentation\">\r\n                <a href=\"#courses\" aria-controls=\"courses\" role=\"tab\" data-toggle=\"tab\">Courses<\/a>\r\n            <\/li>\r\n            <li role=\"presentation\">\r\n                <a href=\"#roles\" aria-controls=\"roles\" role=\"tab\" data-toggle=\"tab\">Roles<\/a>\r\n            <\/li>\r\n            <li role=\"presentation\">\r\n                <a href=\"#reports\" aria-controls=\"reports\" role=\"tab\" data-toggle=\"tab\">Reports<\/a>\r\n            <\/li>\r\n        <\/ul>\r\n    <\/div>\r\n    <!-- CONTAINER FOR TATTLER TABLE-->\r\n    <div class=\"col-md-10\">\r\n        <!-- Tab panes -->\r\n        <div class=\"tab-content\">\r\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"users\">\r\n                {{> admin\/users\/index.html}}\r\n            <\/div>\r\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"courses\">\r\n                {{> admin\/courses\/index.html}}\r\n            <\/div>\r\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"roles\">\r\n                {{> apv_match}}\r\n            <\/div>\r\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"reports\">\r\n                {{> apv_match}}\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>",
    "admin\/users\/edit.html": "\t<h3 style=\"text-align: left; border-width: 0 0 2px; border-color: lightgray;\">Create User: \t\t\t\t\r\n\t\t<input \r\n\t\t\tstyle=\"font-size: 20px; outline: 0; border-width: 0 0 0px; border-color: lightgray; width: 60%;\"\r\n\t\t\ttype=\"email\" \r\n\t\t\tid=\"createUserEmail\" \r\n\t\t\tname=\"createUserEmail\" \r\n\t\t\tplaceholder=\"(Enter Argentic Email Address Here)\" \r\n\t\t\trequired=\"\" \r\n\t\t\tautofocus=\"\" \r\n\t\t\tpattern=\".*argenticmgmt.*\"\r\n\t\t\/>\r\n\t\t<span role=\"button\" onclick=\"create_user()\" style=\"float: right; outline: 0; border-width: 0 0 2px; border-color: lightgray;\" class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"><\/span>\r\n\t<\/h3>\r\n\t\r\n\t<hr \/>\r\n",
    "admin\/users\/index.html": "\r\n<div class=\"col-md-9\">\r\n\t{{> admin\/users\/edit.html}}\r\n<\/div>\r\n\r\n<div class=\"col-md-9\" id=\"user-table-target\"><\/div>\r\n\r\n<script>\r\n\r\n\t$(document).ready(function(){\r\n\t\trenderUserAdminTable();\r\n\t})\r\n\r\n\r\n\r\n\t\/\/\r\n\t\/\/ tsk, tsk, tsk...\r\n\t\/\/\r\n\tfunction renderUserAdminTable(){\r\n\t\r\n\t\t\/\/\r\n\t\t\/\/ Get a list of users\r\n\t\t\/\/ and a list of all available roles\r\n\t\t\/\/ then merge the two together so every\r\n\t\t\/\/ user has all possible roles,\r\n\t\t\/\/ and has them checked when they are that role\r\n\t\t\/\/\r\n\t\t$.when(\r\n\t\t\t$.get(\"\/api\/users\"),\r\n\t\t\t$.get(\"\/api\/roles\")\r\n\t\t).then(function(users, roles){\r\n\t\t\r\n\t\t\troles = roles[0].results.data;\r\n\t\t\tusers = users[0].results.data;\r\n\t\t\t\r\n\t\t\t\/\/\r\n\t\t\t\/\/ Create a hash map so\r\n\t\t\t\/\/ we can more easily work with\r\n\t\t\t\/\/ users before converting it back\r\n\t\t\t\/\/ to a straight array\r\n\t\t\t\/\/\r\n\t\t\tvar user_map = {};\r\n\t\t\tusers.forEach(function(user){\r\n\t\t\t\r\n\t\t\t\t\/\/ Load the map\r\n\t\t\t\tuser_map[user.email] = user_map[user.email] || user;\r\n\t\t\t\t\r\n\t\t\t\t\/\/ Give everyone a place to keep roles (mmm...roles)\r\n\t\t\t\tuser_map[user.email].roles = user_map[user.email].roles || {};\r\n\r\n\t\t\t\t\/\/ Loop through the list of all roles (I'm aware this is duplicative, but it is expedient and works...)\r\n\t\t\t\troles.forEach(function(role){\r\n\t\t\t\t\t\/\/ Give the user that role if it doesn't already exist\r\n\t\t\t\t\tuser_map[user.email].roles[role._id] = user_map[user.email].roles[role._id] || JSON.parse(JSON.stringify(role));\r\n\t\t\t\t\t\r\n\t\t\t\t\t\/\/\r\n\t\t\t\t\t\/\/ Set an attribute \"checked\" on the user's role, if the user's role_id = the role's id\r\n\t\t\t\t\t\/\/ N.B. users are duplicated because they can have more than 1 role...\r\n\t\t\t\t\t\/\/ This process clears that up\r\n\t\t\t\t\t\/\/\r\n\t\t\t\t\tif(role._id == user.role_id){\r\n\t\t\t\t\t\tuser_map[user.email].roles[role._id].checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tusers = Object.values(user_map)\r\n\t\t\t\t\r\n\t\t\tusers.forEach(function(user){\r\n\t\t\t\t\tuser.roles = Object.values(user.roles);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\tconsole.log(user_map,users);\r\n\t\t\t$(\"#user-table-target\").html(templates[\"admin\/users\/table.html\"].render({data: users}));\r\n\t\t\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ DELETE USER\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction delete_user(email){\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"DELETE\",\r\n\t\t\t\"url\": \"\/api\/users\/\" + email\r\n\t\t}).done(function(d){\r\n\t\t\trenderUserAdminTable();\r\n\t\t})\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ SHOW USER'S COURSES\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction show_user_courses(email){\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"GET\",\r\n\t\t\t\"url\": `\/api\/users\/${email}\/courses\/`\r\n\t\t}).done(function(d){\r\n\t\t\tvar tmp = window.templates[\"course\/course-table.html\"].render({email: email, data: d.results.data});\r\n\t\t\twindow.globals.utilities.show_modal(email,tmp,true);\r\n\t\t})\r\n\t}\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ (UN)LINK USER TO ROLE\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction handle_check(el, ev){\r\n\r\n\t\tif(ev.target.checked === false){\r\n\t\t\tvar method = \"DELETE\"\r\n\t\t} else {\r\n\t\t\tvar method = \"POST\"\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\t\"method\": method,\r\n\t\t\t\"url\": `\/api\/users\/${ev.target.dataset.email}\/roles\/${ev.target.dataset.role}`\r\n\t\t})\r\n\t\t.done(function(d){\r\n\t\t\tconsole.log(d);\r\n\t\t})\r\n\t\t.error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\r\n\t}\r\n\t\r\n\t\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\t\/\/ CREATE USER\r\n\t\/\/ \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\r\n\tfunction create_user(){\r\n\t\tvar email = document.querySelector(\"#createUserEmail\").value;\r\n\t\r\n\t\t$.ajax({\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"url\": `\/api\/users\/${email}`\r\n\t\t})\r\n\t\t.done(function(d){\r\n\t\t\tconsole.log(d);\r\n\t\t\trenderUserAdminTable();\r\n\t\t})\r\n\t\t.error(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t}\r\n\t\t\r\n\t\t\r\n\t\r\n\t\r\n<\/script>",
    "admin\/users\/table.html": "{{#data}}\r\n\t<div class=\"col-md-12 card\">\r\n\r\n\t\t<span style=\"float:right; font-size: 26px; margin-top: -10px; margin-right: 10px;\" onclick=\"window.globals.utilities.toggler(this, event)\"; role=\"button\">+<\/span>\r\n\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tUser Id\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{email}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t<div class=\"toggler\" style=\"display: none;\">\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tCreated\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{created}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div style=\"vertical-align: middle\" class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tRoles\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t{{#roles}}\r\n\t\t\t\t\t\t<div style=\"margin-top: 0px;\" class=\"checkbox\">\r\n\t\t\t\t\t\t\t<label for=\"roles-{{email}}-{{_id}}\">\r\n\t\t\t\t\t\t\t\t<input data-email=\"{{email}}\" data-role=\"{{_id}}\" oninput=\"handle_check(this,event)\" {{#checked}}checked{{\/checked}} type=\"checkbox\" name=\"roles-{{email}}-{{_id}}\" id=\"roles-{{email}}-{{_id}}\" value=\"{{name}}\">\r\n\t\t\t\t\t\t\t\t{{name}}\r\n\t\t\t\t\t\t\t<\/label>\r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t{{\/roles}}\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tShow Courses\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t<span role=\"button\" style=\"color: #337ab7;\" onClick=\"show_user_courses('{{email}}', this)\" href=\"#\" id=\"{{email}}\" class=\"delete-me\">CLICK HERE<\/span>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t\r\n\r\n\t\t\t<div class=\"faq col-xs-11\">\r\n\t\t\t\t<div class=\"left-faq col-lg-3 col-md-3 col-sm-3 col-xs-3\">\r\n\t\t\t\t\tDelete\r\n\t\t\t\t<\/div>\r\n\t\t\t\t<div class=\"right-faq col-lg-9 col-md-9 col-sm-9 col-xs-9\">\r\n\t\t\t\t\t<span role=\"button\" style=\"color: #337ab7;\" onClick=\"delete_user('{{email}}', this)\" href=\"#\" id=\"{{email}}\" class=\"delete-me\">CLICK HERE<\/span>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\r\n\r\n\t\t<\/div>\r\n\t<\/div>\r\n{{\/data}}",
    "courses\/course-table.html": "\r\n<table class=\"table table-bordered\" id=\"course-table\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th onclick=\"window.globals.utilities.sort_table(this)\">Course ID<\/th>\r\n\t\t\t<th onclick=\"window.globals.utilities.sort_table(this)\">Course Name<\/th>\r\n\t\t\t<th onclick=\"window.globals.utilities.sort_table(this)\">Due Date<\/th>\r\n\t\t\t<th onclick=\"window.globals.utilities.sort_table(this)\">Complete<\/th>\r\n\t\t<\/tr>\r\n\t<\/thead>\r\n\t<tbody>\r\n\t\t{{#data}}\r\n\t\t\t<tr>\r\n\t\t\t\t<td style=\"text-align: center;\">{{_id}}<\/td>\r\n\t\t\t\t<td style=\"text-align: left;\">{{name}}<\/td>\r\n\t\t\t\t<td style=\"text-align: left;\">{{due_date}}<\/td>\r\n\t\t\t\t<td style=\"text-align: left;\">\r\n\t\t\t\t\t<label class=\"switch\">\r\n\t\t\t\t\t\t<input {{status}} onchange=\"window.globals.utilities.markCourse(event, this)\" id=\"course-{{_id}}\" {{#email}}data-email=\"{{email}}\"{{\/email}} type=\"checkbox\" \/>\r\n\t\t\t\t\t\t<span class=\"slider\"><\/span>\r\n\t\t\t\t\t<\/label>\r\n\t\t\t\t<\/td>\r\n\t\t\t<\/tr>\r\n\t\t{{\/data}}\r\n\t<\/tbody>\r\n<\/table>",
    "courses\/index.html": "<!-- css stolen from  https:\/\/www.w3schools.com\/howto\/tryit.asp?filename=tryhow_css_switch -->\r\n\r\n<h1 style=\"margin-top: 100px;\">Hello {{email-address}}<\/h1>\r\n\r\n<p class=\"lead\">Below is a list of courses and what not that you're responsible for:<\/p>\r\n\r\n<div id=\"course-table\"><\/div>\r\n\r\n\r\n<script>\r\n\t\/\/ Load courses first...\r\n\t$.get(\"\/api\/users\/\" + window.globals.session[\"email-address\"] + \"\/courses\/\")\r\n\t.done(function(courses){\r\n\t\tconsole.log(\"courses\",courses);\r\n\t\t$(\"#course-table\").html(window.templates[\"courses\/course-table.html\"].render({\"data\": courses.results.data}));\r\n\t})\r\n\t.error(function(err){\r\n\t\tconsole.log(\"ERR\",err);\r\n\t});\r\n<\/script>",
    "errors\/403.html": "<style>\r\n    #page{\r\n        text-align: center;\r\n\t\tmargin-top: 85px;\r\n    }\r\n<\/style>\r\n<div class=\"row\" id=\"page\">\r\n    <h1>403 - Forbidden<\/h1>\r\n    <img src=\"\/training\/src\/img\/office_space.jpg\" class=\"img-rounded\"><\/img>\r\n    <h2>\r\n        You don't have the credentials to access this resource. <br \/>\r\n\t\t<br \/>Not a value judgement...but maybe you should work on getting your life in order...\r\n    <\/h2>\r\n<\/div>",
    "errors\/404.html": "<style>\r\n    #page{\r\n        text-align: center;\r\n\t\tmargin-top: 85px;\r\n    }\r\n<\/style>\r\n<div class=\"row\" id=\"page\">\r\n    <h1>This is not the page you are looking for...<\/h1>\r\n    <img src=\"\/training\/src\/img\/droids.gif\" class=\"img-rounded\"><\/img>\r\n    <h1>404 - Resource Not Found<\/h1>\r\n<\/div>",
    "index\/email-form.html": "<div class=\"\">\r\n  <form id=\"emailForm\" name=\"emailForm\" class=\"form-signin\" method=\"POST\" action=\"\/api\/validate?__redirect__=\/training\/\">\r\n\t<label for=\"inputEmail\" class=\"sr-only\">Email address<\/label>\r\n\t<input \r\n\t\ttype=\"email\" \r\n\t\tid=\"inputEmail\" \r\n\t\tname=\"inputEmail\" \r\n\t\tclass=\"form-control\" \r\n\t\tplaceholder=\"Email address\" \r\n\t\trequired=\"\" \r\n\t\tautofocus=\"\" \r\n\t\tpattern=\".*argenticmgmt.*\"\r\n\t\t\r\n\t><\/input>\r\n\t<button style=\"margin-top: 20px;\" class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in<\/button>\r\n  <\/form>\r\n<\/div>",
    "index\/new.html": "<div class=\"row\" style=\"margin-top: 200px;\">\r\n\t<h1 class=\"cover-heading\">Don't Be A Dummy.<br\/> Document Your Training<\/h1>\r\n\t<p class=\"lead\">Fill out your e-mail address below and hit SUBMIT<br \/>You'll get an e-mail giving you access.<\/p> \r\n\r\n\t{{> index\/email-form.html}}\r\n<\/div>",
    "index\/pending.html": "<div class=\"row\" style=\"margin-top: 200px;\">\r\n\t<h1 class=\"cover-heading\">Thanks! You Should Get an E-Mail Shortly<\/h1>\r\n\t<p class=\"lead\">If not, <code>CHECK YOUR SPAM!<\/code> Not there? Fill out your e-mail address below and hit SUBMIT<br \/>If you're still having problems; that sucks...<\/p> \r\n\r\n\t{{> index\/email-form.html}}\r\n<\/div>",
    "index\/valid.html": "<div class=\"row\" style=\"margin-top: 200px;\">\r\n\t<h1 class=\"cover-heading\">You are logged in as {{email-address}}<\/h1>\r\n\t<p class=\"lead\">Click on <a href=\".\/courses\">COURSES<\/a> to see what courses you are responsible for.<\/p> \r\n<\/div>",
    "main.html": "    <nav class=\"navbar navbar-default navbar-fixed-top\">\r\n      <div class=\"container\">\r\n        <div class=\"navbar-header\">\r\n          <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\r\n            <span class=\"sr-only\">Toggle navigation<\/span>\r\n            <span class=\"icon-bar\"><\/span>\r\n            <span class=\"icon-bar\"><\/span>\r\n            <span class=\"icon-bar\"><\/span>\r\n          <\/button>\r\n          <a class=\"navbar-brand\" href=\"\/training\/\">Project name<\/a>\r\n        <\/div>\r\n        <div id=\"navbar\" class=\"collapse navbar-collapse\">\r\n          <ul class=\"nav navbar-nav\">\r\n            <li {{#state.index}}class=\"active\"{{\/state.index}}><a href=\"\/training\/\">Home<\/a><\/li>\r\n\t\t\t{{#valid}}\r\n            <li {{#state.courses}}class=\"active\"{{\/state.courses}}><a href=\"\/training\/courses\">Courses<\/a><\/li>\r\n\t\t\t{{#roles.admin}}\r\n\t\t\t<li {{#state.admin}}class=\"active\"{{\/state.admin}}><a href=\"\/training\/admin\">Admin<\/a><\/li>\r\n\t\t\t{{\/roles.admin}}\r\n\t\t\t<li><a href=\"\/api\/validate\/reset\">Log Out<\/a><\/li>\r\n            {{\/valid}}\r\n          <\/ul>\r\n        <\/div><!--\/.nav-collapse -->\r\n      <\/div>\r\n    <\/nav>\r\n\t\r\n\t<div class=\"container\">\r\n\t\t<div id=\"state-message\">\r\n\t\t\t{{> partial}}\r\n\t\t<\/div>\r\n\t<\/div>\r\n\r\n\t<!-- Modal -->\r\n\t<div class=\"modal fade\" id=\"the_modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"><\/div>",
    "modal.html": "<!-- Modal -->\r\n\r\n  <div class=\"modal-dialog {{#large}}modal-lg{{\/large}}\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <!-- HEADER -->\r\n      <div class=\"modal-header\">\r\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;<\/span><\/button>\r\n        <h4 class=\"modal-title\" id=\"myModalLabel\">{{title}}<\/h4>\r\n      <\/div>\r\n      <div class=\"modal-body\" id=\"modal_body\">{{{body}}}<\/div>\r\n    <\/div>\r\n  <\/div>"
}